<ion-content>
  <div class="header">
    <ion-toolbar class="toolbar" [style.--background]="'url(' + bakeryDetails?.photo +') center/cover'">
      <ion-buttons slot="start">
        <ion-back-button class="toolbar__btn" mode="md" defaultHref="/" (click)="onExit()"></ion-back-button>
      </ion-buttons>
    </ion-toolbar>
    <img class="toolbar__img" *ngIf="bakeryDetails?.bakery_logo" [src]="bakeryDetails.bakery_logo">
  </div>
  <div class="info">
    <div class="info-main">
      <div class="container">
        <div class="row">
          <div>
            <h3 class="info__title">{{ 'general.bakery' | translate }} {{bakeryDetails?.name}}</h3>
            <p class="info__text">{{bakeryAddress}}</p>
          </div>
          <ion-icon class="info__icon" src="../../../../assets/icons/bakery/info.svg" (click)="onInfo()"
                    tappable></ion-icon>
        </div>
        <div class="info__rate rate">
<!--          <img class="rate__img" src="../../../../assets/img/bakery/stars4.jpg">-->
<!--          <span class="info__text">4,1 /5 (15)</span>-->
        </div>
        <p class="info__description description">
          {{bakeryInfo}}
          <span class="description__continue" *ngIf="bakeryInfoTrim !== bakeryInfoFull && !isBakeryInfoFull"
                (click)="toggleBakeryInfo()" tappable>Continue</span>
          <span class="description__continue" *ngIf="bakeryInfoTrim !== bakeryInfoFull && isBakeryInfoFull"
                (click)="toggleBakeryInfo()" tappable>Turn</span>
        </p>
      </div>
    </div>
    <div class="info-details" *ngIf="isInfoFull">
      <div class="container">
        <div class="info-details__icons-row">
          <ion-icon class="info-details__icons-row-icon" *ngFor="let feature of bakeryDetails?.features"
                    [src]="bakeryServ.getIcon(feature)"></ion-icon>
        </div>
        <div class="open-hours">
          <div class="open-hours__row">
            <ion-icon class="open-hours__icon" src="../../../../assets/icons/bakery/calendar&clock.svg"></ion-icon>
            <p>{{ 'bakery.openHour' | translate }}</p>
          </div>
          <div class="open-hours__list list">
            <div class="list__item" *ngFor="let item of openingHours">
              <span class="list__item-day">{{item[0].substr(0, 3)}}</span>
              <span>{{item[1].start}} - {{item[1].end}}</span>
            </div>
          </div>
        </div>
      </div>
      <div class="pick-up-place">
        <p class="pick-up-place__title">{{ 'bakery.pickUpHere' | translate }}</p>
        <p class="pick-up-place__text">{{bakeryAddress}}</p>
      </div>
      <div class="reminder">
        <p class="reminder__title">{{ 'bakery.reminderTitle' | translate }}</p>
        <p class="reminder__txt">{{ 'bakery.reminderTxt' | translate }}</p>
      </div>
    </div>
  </div>
  <div class="products" *ngIf="!isInfoFull">
    <div class="sections">
      <div class="sections__item" *ngFor="let category of categories, let i = index"
           (click)="onCategorySelect(i)"
           [class.sections__item_selected]="i === selectedCategoryIndex" tappable>{{category.name}}</div>
    </div>
    <div class="product-list">
      <div class="container">
        <ng-container>
          <div class="product" *ngFor="let product of productsList" (click)="presentProductDetailsModal(product)">
            <div class="col-left">
              <ion-img class="product__img" [src]="product?.photo"></ion-img>
              <ion-img class="product__img-corner product__img-corner_bio" *ngIf="product.bio_certification"
                       src="../../../../assets/img/bakery/bio.png"></ion-img>
              <ion-img class="product__img-corner product__img-corner_new" *ngIf="product.is_new"
                       src="../../../../assets/img/bakery/new.png"></ion-img>
            </div>
            <div class="col-center">
              <div>
                <p class="product__name">{{product.name}}</p>
                <p class="product__details-title">Details</p>
              </div>
              <p class="product__details-text"><span *ngIf="product.availability">Only </span>
                <span class="available-day" *ngFor="let day of product.availability">{{day}}, </span></p>
            </div>
            <div class="col">
              <p class="product__price">{{product.price | currency:'EUR':'symbol'}}</p>
              <div class="product__count count">
                <div class="count__btn" (click)="removeProductFromCart(product, $event)" tappable>-</div>
                <div class="count__value">{{getProductCount(product.id)}}</div>
                <div class="count__btn" (click)="addProductToCart(product, $event)" tappable>+</div>
              </div>
            </div>
          </div>
        </ng-container>
      </div>
    </div>
  </div>
  <div class="cart" *ngIf="cartService.getCart().length > 0" tappable (click)="openShoppingCart()">
    <div class="cart__icon-wrapper">
      <ion-icon class="cart__icon" src="../../../../assets/icons/shopping-cart/shopping-bag.svg"></ion-icon>
      <ion-badge class="cart__icon-badge">{{cartService.getTotalCount()}}</ion-badge>
    </div>
    <p class="cart__text">
      {{ 'shoppingCart.header' | translate }} ({{cartService.getTotalPrice() | currency:'EUR':'symbol'}})</p>
  </div>
</ion-content>
